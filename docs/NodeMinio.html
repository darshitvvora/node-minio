<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: NodeMinio</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: NodeMinio</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>NodeMinio<span class="signature">(config, bucket)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="NodeMinio"><span class="type-signature"></span>new NodeMinio<span class="signature">(config, bucket)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Minio Helper
Initialize Node Minio Object
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>bucket</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line44">line 44</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const NodeMinio = require('node-minio');

const config = {
    minio: {
      endPoint: "192.168.23.100",
      accessKey: "SN8JBGY43WPMFT0R56fsdfdsf",
      secretKey: "fdfdfdfd+3R9e/x4V0F6Xpjtfdsfd",
      secure: false,
      port: 8000,
    },
    errorFileUrl: "/sample/errorfile.pdf",
    bucket: "sample"
}

 const Minio = new NodeMinio(config);</code></pre>



    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="base64Upload"><span class="type-signature"></span>base64Upload<span class="signature">(minioObject)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    Takes and object with 2 attributes {object, base64String}.
Asynchronously uploads file on specified path and returns promise
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minioObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Contains an object with filepath, bucket and base64string</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line138">line 138</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    returns promise object
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const NodeMinio = require('node-minio');

const config = {
    minio: {
        endPoint: process.env.MINIO_ENDPOINT,
        accessKey: process.env.MINIO_ACCESS_KEY,
        secretKey: process.env.MINIO_SECRET_KEY,
        secure: false,
        port: 8000,
      },
      errorFileUrl: "/sample/errorfile.pdf"
  }

const Minio = new NodeMinio(config);

async function uploadFile(file) {
    const { base64: base64String, filename } = file;
    const extension = filename.split('.').pop();
    const fileName = moment().format('YYYY_MM_DD_hh_mm_ss_a');
    const object = `sampleFile/${fileName}.${extension}`;

    await Minio.base64Upload({ object, base64String });
    return object;
  }</code></pre>



        
            

    

    
    <h4 class="name" id="base64UploadMulti"><span class="type-signature"></span>base64UploadMulti<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Takes and object with 2 attributes {object, bucket, expires}.
Uploads multiple base64 files. Used in sync with Multer
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line426">line 426</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="bufferUpload"><span class="type-signature"></span>bufferUpload<span class="signature">(minioObject)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    Takes and object with 3 or 4 attributes {object, base64String, bucket, buffer}.
Uploads file in specified minio bucket. This function is internally used by
base64Upload function
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minioObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Contains an object with filepath, bucket and base64string</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line96">line 96</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    returns promise object
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const NodeMinio = require('node-minio');

const config = {
    minio: {
        endPoint: process.env.MINIO_ENDPOINT,
        accessKey: process.env.MINIO_ACCESS_KEY,
        secretKey: process.env.MINIO_SECRET_KEY,
        secure: false,
        port: 8000,
      },
      errorFileUrl: "/sample/errorfile.pdf"
  }

const Minio = new NodeMinio(config);

async function uploadFile(file) {
    const { base64: base64String, filename } = file;
    const extension = filename.split('.').pop();
    const fileName = moment().format('YYYY_MM_DD_hh_mm_ss_a');
    const object = `sampleFile/${fileName}.${extension}`;
    const buffer = Buffer.from(base64String, 'base64');

    await Minio.bufferUpload({ object, base64String, buffer });
    return object;
  }</code></pre>



        
            

    

    
    <h4 class="name" id="customCopyObject"><span class="type-signature"></span>customCopyObject<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Takes and object with 2 attributes {object, bucket, expires}.
Copies file from one bucket to another
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line432">line 432</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="downloadLink"><span class="type-signature"></span>downloadLink<span class="signature">(minioObject)</span><span class="type-signature"> &rarr; {url}</span></h4>
    

    



<div class="description">
    Takes an object with 2 attributes {object, name}.
Create a downloadable link for file
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minioObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Contains an object with  bucket, filepath</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line307">line 307</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    returns url
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">url</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const Minio = require('node-minio');

async function downloadFile(name) {
      const file = {
          object: 'sampleFiles/',
          name: `${name}_${
            moment().format('YYYY-DD-MM')}.${ext}`,
        };

      return Minio.downloadLink(file)
            .then(downloadLink => res.redirect(downloadLink));
            }</code></pre>



        
            

    

    
    <h4 class="name" id="downloadLinkBase"><span class="type-signature"></span>downloadLinkBase<span class="signature">(minioObject)</span><span class="type-signature"> &rarr; {url}</span></h4>
    

    



<div class="description">
    Takes an object with 2 attributes {object, name}.
Create a downloadable link for file
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minioObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Contains an object with  bucket, filepath</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line271">line 271</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    returns url
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">url</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const Minio = require('node-minio');

async function downloadFile(name) {
      const file = {
          object: 'sampleFiles/',
          name: `${name}_${
            moment().format('YYYY-DD-MM')}.${ext}`,
        };

      return Minio.downloadLinkBase(file)
            .then(downloadLink => res.redirect(downloadLink));
            }</code></pre>



        
            

    

    
    <h4 class="name" id="getFileStream"><span class="type-signature"></span>getFileStream<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Takes and object with 2 attributes {object, bucket, expires}.
Gets object from minio as a stream
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line458">line 458</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="listDirectoryObjects"><span class="type-signature"></span>listDirectoryObjects<span class="signature">(minioObject, FSCompat)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    Takes an object with 1 attributes {object}.
Lists all the directories in current folder
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minioObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Contains an object with filepath, bucket, expiry time</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>FSCompat</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Removes forward slash (/) from file path</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line227">line 227</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    returns promise object
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const Minio = require('node-minio');

async function listFilesInDirectory() {

 const baseUrl = "/sampleFile";
  let fileList = await Minio.listDirectoryObjects({ object: baseUrl });
  return fileList;
  }</code></pre>



        
            

    

    
    <h4 class="name" id="retryDownloadLink"><span class="type-signature"></span>retryDownloadLink<span class="signature">(minioObject)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    Takes and object with 2 attributes {object}.
Used to retry alternative file to be downloaded. Here in tha example below we dont get original file than we search for -rst file and try download it
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minioObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Contains an object with filepath
*</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line344">line 344</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    returns download link
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const Minio = require('node-minio');

async function retryFileFromMinio(fileName) {
     const retryObject = fileName.path.toLowerCase();
     const name = `${fileName}.pdf`.replace(/ /g, '_');

   const url = await Minio
    .retryDownloadLink({
    name,
    retryObject,
    object: retryObject.replace(/\.pdf$/g, '-rst.pdf'),
  });
  }</code></pre>



        
            

    

    
    <h4 class="name" id="uploadLink"><span class="type-signature"></span>uploadLink<span class="signature">(minioObject)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    Takes and object with 2 attributes {object, bucket, expires}.
Generates and returns presigned URL for HTTP PUT operations.
Clients may point to this URL to upload objects directly to a bucket even if it is private.
This presigned URL can have an associated expiration time in seconds after which the URL is no longer valid.
The default value is 7 days.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minioObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Contains an object with option bucket name and expiry</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line384">line 384</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    returns url which can be used to upload file
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>https://docs.min.io/docs/upload-files-from-browser-using-pre-signed-urls.html
https://docs.min.io/docs/javascript-client-api-reference.html#presignedPutObject
const Minio = require('node-minio');

async function getUploadLink(req,res) {
   const url = await Minio
    .uploadLink({});
  return res.json(url);
  }</code></pre>



        
            

    

    
    <h4 class="name" id="uploadTemp"><span class="type-signature"></span>uploadTemp<span class="signature">(minioObject)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    Uploads base64 file  from temp path(specified path) to bucket
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minioObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Contains an object with option bucket</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line414">line 414</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    returns promise
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const Minio = require('node-minio');

async function uploadFromTemp(req, res, file) {
const extension = (file.name || file.filename).split('.').pop().toLowerCase();
        minioObject = {
          base64String: file.base64,
          temp: file.path,
          object: `sample/${Id}/${Id
          }_${moment().format('DD-MM-YYYY_hh-mm-ss-a')}.${extension}`,
        };
   const file = await Minio
    .uploadTemp(minioObject);
  return res.json(file);
  }</code></pre>



        
            

    

    
    <h4 class="name" id="viewLink"><span class="type-signature"></span>viewLink<span class="signature">(minioObject, FSCompat)</span><span class="type-signature"> &rarr; {object}</span></h4>
    

    



<div class="description">
    Takes and object with 2 attributes {object, bucket, expires}.
Generates dynamic Minio URL for accessing file with expiry
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>minioObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Contains an object with filepath, bucket, expiry time</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>FSCompat</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Removes forward slash (/) from file path</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line179">line 179</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    returns promise object
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const NodeMinio = require('node-minio');

const config = {
    minio: {
        endPoint: process.env.MINIO_ENDPOINT,
        accessKey: process.env.MINIO_ACCESS_KEY,
        secretKey: process.env.MINIO_SECRET_KEY,
        secure: false,
        port: 8000,
      },
      errorFileUrl: "/sample/errorfile.pdf"
  }

const Minio = new NodeMinio(config);

async function viewFile(fileName) {
    const filePath= 'sampleFile/${fileName}.pdf'

   const url = await minio
    .viewLink({
      object: filePath,
    }, false);
  return res.json(url);
  }</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="NodeMinio.html">NodeMinio</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Tue Dec 31 2019 11:38:26 GMT+0530 (IST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>